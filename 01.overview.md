
# 01-overview.md — Surat Lamaran Sederhana

## 🎯 Tujuan
Buat halaman `/surat-lamaran-sederhana` untuk membuat **Surat Lamaran Kerja berbasis form (tanpa AI)**.  
User hanya perlu:
1. Mengisi form **biodata** dan **data lamaran**,  
2. Memilih satu dari **10 template** surat,  
3. Melihat hasil suratnya langsung muncul di sisi kanan (live preview).

Fitur yang sudah harus aktif di tahap ini:
- Form input lengkap (biodata + perusahaan)
- Template picker (dropdown)
- Live preview real-time (tanpa klik submit)
- LocalStorage persist (data tidak hilang saat refresh)
- Layout responsive (2 kolom desktop, stack di mobile)

---

## ⚙️ Stack dan Library
Gunakan stack ringan dan cepat:
- **Next.js 14 (App Router)** + **TypeScript**
- **TailwindCSS** (utility first)
- **shadcn/ui** untuk komponen siap pakai:
  - Button, Input, Textarea, Select, Tabs, Card, Sheet/Dialog, Toast
- **lucide-react** untuk ikon
- Tidak memakai font eksternal (gunakan system font agar tetap ringan)

---

## 📁 Struktur Folder & File
Gunakan struktur modular seperti berikut:

```

/app/surat-lamaran-sederhana/page.tsx
/components/FormBiodata.tsx
/components/FormPerusahaan.tsx
/components/TemplatePicker.tsx
/components/PreviewSurat.tsx
/lib/templates.ts
/lib/utils.ts
/lib/usePersistedState.ts

````

**Penjelasan singkat:**
- `page.tsx` → layout utama (grid dua kolom)
- `FormBiodata.tsx` → input biodata pengguna
- `FormPerusahaan.tsx` → input data lamaran
- `TemplatePicker.tsx` → dropdown pilihan template
- `PreviewSurat.tsx` → menampilkan surat hasil kombinasi template + data
- `lib/templates.ts` → array daftar 10 template surat
- `lib/utils.ts` → fungsi helper untuk format tanggal, lampiran, dan replace placeholder
- `lib/usePersistedState.ts` → hook custom untuk simpan/muat data form ke localStorage

---

## 💾 Persistensi Data
Gunakan `usePersistedState` agar data tetap tersimpan setelah refresh browser.  
Gunakan dua key lokal berikut:
```ts
jobmate_sls_form_v2
jobmate_sls_templateId_v2
````

---

## 🧱 Skema Data TypeScript

```ts
// Biodata pengguna
type Biodata = {
  namaLengkap: string
  tempatLahir: string
  tanggalLahir: string // format 'YYYY-MM-DD'
  jenisKelamin: string // "Laki-laki" | "Perempuan" | lainnya
  status: string
  pendidikan: string
  noHandphone: string
  email: string
  alamatKota: string
  alamatLengkap: string
}

// Data perusahaan dan lamaran
type Perusahaan = {
  kepadaYth: string // contoh: HRD
  namaPerusahaan: string
  kotaPerusahaan: string
  jenisInstansi: string // PT/CV/Toko/Pabrik/dll
  posisiLowongan: string
  sumberLowongan: string
  tanggalLamaran: string // format 'YYYY-MM-DD'
  lampiran: string[] // setiap baris = 1 lampiran
}

// Gabungan form state
type FormState = {
  biodata: Biodata
  perusahaan: Perusahaan
}
```

---

## 🧩 Placeholder Template

Semua template surat menggunakan placeholder berikut.
Saat di-render, setiap `{{placeholder}}` akan diganti otomatis dengan isi form:

```
{{kotaPerusahaan}}
{{tanggalLamaran}}
{{kepadaYth}}
{{namaPerusahaan}}
{{sumberLowongan}}
{{posisiLowongan}}
{{jenisInstansi}}
{{namaLengkap}}
{{tempatLahir}}
{{tanggalLahir}}
{{jenisKelamin}}
{{status}}
{{pendidikan}}
{{alamatLengkap}}
{{noHandphone}}
{{email}}
{{lampiranList}}
```

---

## ⚙️ Helper Functions (lib/utils.ts)

Buat 3 fungsi penting:

```ts
// format tanggal Indonesia
export function formatTanggalID(iso?: string): string {
  if (!iso) return "—"
  const date = new Date(iso)
  return date.toLocaleDateString("id-ID", { day: "2-digit", month: "long", year: "numeric" })
}

// gabungkan lampiran jadi list bernomor
export function renderLampiran(items?: string[]): string {
  if (!items || items.length === 0) return "—"
  return items.map((v, i) => `${i + 1}. ${v}`).join("\n")
}

// replace semua placeholder di template
export function replacePlaceholders(body: string, data: { biodata: Biodata; perusahaan: Perusahaan }): string {
  const { biodata, perusahaan } = data
  const lampiranList = renderLampiran(perusahaan.lampiran)
  const tanggalLahir = formatTanggalID(biodata.tanggalLahir)
  const tanggalLamaran = formatTanggalID(perusahaan.tanggalLamaran)
  const map: Record<string, string> = {
    ...biodata,
    ...perusahaan,
    lampiranList,
    tanggalLahir,
    tanggalLamaran,
  }
  return body.replace(/{{(.*?)}}/g, (_, key) => map[key.trim()] || "—")
}
```

---

## 📋 Default Nilai Lampiran

Isi default textarea lampiran dengan daftar berikut (pisahkan per baris):

```
CV - Daftar Riwayat Hidup
Scan/Fotokopi Ijazah & Transkrip Nilai
Scan/Fotokopi SKCK
Foto Terbaru Ukuran 3x4 atau 4x6
Scan/Fotokopi KTP
```

---

## 🧭 Alur Halaman

1. Halaman menampilkan dua tab:

   * **Biodata**
   * **Data Lamaran**
2. User mengisi semua input.
3. Di atas preview ada dropdown TemplatePicker.
4. Saat user mengetik → preview di kanan langsung berubah.
5. Data otomatis tersimpan ke localStorage.

---

## 🧾 Acceptance Criteria Tahap 01

✅ Form Biodata dan Data Lamaran berfungsi penuh
✅ TemplatePicker muncul dan bisa diganti
✅ Preview surat menampilkan hasil lengkap sesuai form
✅ Data form dan template tersimpan otomatis di localStorage
✅ Layout responsive dan ringan
✅ Belum perlu ada tombol export (PDF/Word/Print) — akan ditambahkan di tahap 02

---

## 💡 Catatan

* Gunakan `white-space: pre-wrap` di preview agar newline tetap terlihat.
* Validasi input sederhana (`required`, `pattern`, dll).
* Jangan gunakan font eksternal.
* Semua teks gunakan Bahasa Indonesia baku.
* Fokus utama tahap ini: struktur + state management + live preview.

```
selesai ini lanjutkan eksekusi ke 02-ui-ux-features.md